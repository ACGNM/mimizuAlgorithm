# 树
## 二叉树
### 完全二叉树的数组表示下的位置关系

- 位置k的节点的左子节点位置为`2k+1`, 右子节点的位置为`2k+2`
  - 完全二叉树在满叶节点的情况下第`i`层的节点数是`i-1`层的`2`倍
  - 如果`0~i`层的节点个数总和是`n`，则第i+1层节点个数是`n+1`
    - 这里的`n`是奇数，也就是`(2^i)-1`
    - 数组的编号要从0开始，所以第`i`层最后一个元素编号是`n-1`
    - 第`i+1`层的最后一个编号（i层最后一个节点的右子节点）是上一层编号加经过点的个数
    - i层最后一个元素编号是`k`的话，就说明要经过`k+2`（也就是`(k+1)+1`）个位置
    - 所以第`i+1`层的最后一个编号是`2k+2`，那左子节点就是2k-1
    - 第i层的往回推j个格仍然成立
      - i层退`j`个，`i+1`层退2j个
      - `k-j`对应的是`2k+2-2j=2(k-j)+2`

  一开始的推算想法
  - 下面推算数`i-1`层的第一个节点的子节点位置
    - 从`0`开始数节点的话，每一层的第一个节点的位置正好符合上面的规律，即每一层的第一个节点需要再经过`n+1`个位置就是其左子节点位置即`2n+1`。这时n的位置的值恰好为`0~i-2`层的节点数总和
    - 由此扩展开去，第`k`个位置相当于第一个节点向后移动了j个位置即`k=n+j`。此时第`n`个位置的左子节点位置为`2n+1`, 则再经过j个节点的子节点就为k的左子结点位置：`2n+1 + 2j = 2(n+j)+1 = 2k+1`